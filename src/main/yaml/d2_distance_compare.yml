incarnation: protelis

variables:
  space_variability: &space_variability
    min: 0
    max: 1
    step: 0.5
    default: 0.5
  time_or_noise: &time_or_noise
    min: 0
    max: 1
    step: 1
    default: 1
  random: &random
    min: 0
    max: 9
    step: 1
    default: 0
 
  dspace: &dspace
    formula: "300*$space_variability"
  dtime: &dtime
    formula: "$time_or_noise/2"
  speed: &speed
    formula: "$dspace/10"
  vibr: &vibr
    formula: "$time_or_noise*5"

seeds:
  scenario: *random
  simulation: *random

network-model:
  type: ConnectWithinDistance
  parameters: [75]
  
pools:
  - pool: &program
    - time-distribution:
        type: WeibullDistributedWeibullTime
        parameters: [1, *dtime, *dtime]
      type: Event
      actions:
        - type: RunProtelisProgram
          parameters: [d2_distance_compare, 3]
    - program: send
  - pool: &vibrate
    - time-distribution: 1
      type: Event
      actions:
        - type: BrownianMove
          parameters: [*vibr]
  - pool: &move
    - time-distribution: 5
      type: Event
      actions:
        - type: MoveToTarget
          parameters: [target, *speed]
  - pool: &deviceContent
    - molecule: dspace
      concentration: *dspace

displacements:
  - in:                                         # source 1
      type: Point
      parameters: [0, 100]
    programs:
      - *program
    contents: *deviceContent
  - in:                                         # source 2
      type: Point
      parameters: [2000, 100]
    programs:
      - *program
    contents: *deviceContent
  - in:                                         # devices
      type: Rectangle
      parameters: [398, 0, 0, 2000, 200]
    programs: 
      - *program
      - *move
      - *vibrate
    contents: *deviceContent
