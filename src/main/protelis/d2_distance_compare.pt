module d2_distance_compare

import utils
import algorithm

// The source of distance estimations switches between devices 0 and 1 every minute.
let sourceId = if ((self.getCurrentTime()+30) % 120 < 60 ) { 0 } else { 1 };
let source = self.getDeviceUID().getId() == sourceId;
env.put("source", source);

// Determines random targets for devices.
let dspace = env.get("dspace");
rectangleWalkRange([0,0], [2000,200], dspace, 1);

// Computes distances (exact and with classic and BIS estimations).
env.put("classic",	G_STD(source));
env.put("bis",		G_BIS(source, 150, 50));
env.put("truedist",	self.distanceTo(sourceId));
